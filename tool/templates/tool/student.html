{% load static %}

<link rel="stylesheet" type="text/css" href="{% static 'tool/bootstrap.min.css' %}"/>
<link rel="stylesheet" type="text/css" href="{% static 'tool/style.css' %}"/>
<link rel="stylesheet" type="text/css" href="{% static 'tool/font-awesome.min.css' %}">
<script type="text/javascript" src="{% static 'tool/jquery-3.2.1.min.js' %}"></script>
<script type="text/javascript" src="{% static 'tool/bootstrap.min.js' %}"></script>

<a href="{% url 'tool:index' %}">Home</a>
<a id="settings" href="{% url 'tool:settings' %}"><i class="fa fa-cog fa-lg" aria-hidden="true"></i></a>
<span id="username-indicator">{{ user.username }}&nbsp;&nbsp;</span>

<div id="content" class="container">

    <h2>{{ student.user.username }}</h2>

    <hr>

    <!-- ATTENDANCES -->
    {% if student_module_attendances %}
    <h4>Modules</h4>
    <div class="panel-group" id="accordion">
        {% for student_module_attendance in student_module_attendances %}
        <div class="panel panel-default">
            <div class="panel-heading" data-toggle="collapse" data-parent="#accordion" data-target="#collapse{{ forloop.counter }}">
                <h4 class="panel-title">
                    {{ student_module_attendance.module.module_code }}
                </h4>
            </div>
            <div id="collapse{{ forloop.counter }}" class="panel-collapse collapse">
                <div class="panel-body">
                    <table>
                        <tr class="double-header">
                            <th class="double-header-left-cell double-header-right-cell" rowspan="2">Module Code</th>
                            {% for attendance in student_module_attendance.attendances %}
                            <th {% if forloop.last %} class="double-header-right-cell" {% endif %}>{{ attendance.lecture.date }}
                            </th>
                            {% endfor %}
                            <th class="double-header-right-cell" rowspan="2">% Attended</th>
                        </tr>
                        <tr class="double-header">
                            {% for attendance in student_module_attendance.attendances %}
                            <th {% if forloop.last %} class="double-header-right-cell" {% endif %}>{{ attendance.lecture.session_id }}
                            </th>
                            {% endfor %}
                        </tr>
                        <tr class="alt">
                            <td>{{ student_module_attendance.module.module_code }}</td>
                            {% for attended in student_module_attendance.attendances %}
                            <td>
                                {% if attended.attended %}
                                <i class="fa fa-check fa-lg" aria-hidden="true"></i>
                                {% else %}
                                <i class="fa fa-times fa-lg" aria-hidden="true"></i>
                                {% endif %}
                            </td>
                            {% endfor %}
                            <td>{{ student_module_attendance.percent_attended|floatformat:2 }}%</td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
    <br>
    <hr>
    <br>
    {% else %}
    <p>No attendances are available.</p>
    {% endif %}

</div>
